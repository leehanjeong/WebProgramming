{"version":3,"sources":["components/Movie.js","api.js","components/Search.js","App.js","index.js"],"names":["Movie","id","title","year","rating","like","genres","runtime","summary","background","like_cnt","className","href","target","style","backgroundImage","replace","naverMoviesApi","limit","axios","get","params","sort_by","Search","state","isLoading","isSearched","movies","idx","getSearchMovie","a","console","log","search","value","setState","searchData","String","searchArr","split","data","getMovieDetail","fetch","method","headers","then","response","json","movie","like_count","handleChange","e","handleSubmit","preventDefault","buttonClicked","this","buttons","map","index","key","src","medium_cover_image","onClick","movie_result","large_cover_image","name","onSubmit","type","onChange","placeholder","display","React","Component","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.16f2a536.chunk.js","sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport \"./Movie.css\";\n\nfunction Movie({id, year, title, like, rating, genres, runtime, summary, background, like_cnt}) {\n\n  return (\n    <div className=\"movie\">\n    <a href={id} target=\"_blank\">\n    <div className=\"movie_data\" >\n      <div className=\"movie_image\" style={{backgroundImage: `url(${background})`}}>\n        <div className=\"movie_title\">\n          <div className=\"a\">\n          <p className=\"movie_name\">{\n            title.replace(/<b>/gi,\"\").replace(/<\\/b>/gi,\"\")\n          }</p>\n          <p className=\"movie_genres\">\n            {genres}\n          </p> \n          </div>\n        </div>\n      </div>\n      <div className=\"background\">\n      <p className=\"movie_info\">영화정보</p>\n        <p className=\"movie_sub_info\">\n          <p>{runtime}분</p>\n          <p className=\"movie_rating\">평점:&nbsp;{rating}</p>\n          <p>좋아요:&nbsp;{like_cnt}</p>\n        </p>\n        <p className=\"movie_summary\">줄거리</p>\n        <p className=\"movie_sub_summary\">{summary}\n        </p>\n      </div>\n    </div>\n  </a>\n  </div>\n  )\n};\n\nMovie.propTypes = {\n  id: PropTypes.number.isRequired,\n  genres: PropTypes.string.isRequired,\n  title: PropTypes.string.isRequired,\n  poster: PropTypes.string.isRequired,\n  rating: PropTypes.number.isRequired,\n  runtime: PropTypes.number.isRequired,\n  summary: PropTypes.string.isRequired,\n  like: PropTypes.string.isRequired\n\n};\n\nexport default Movie;\n","import axios from 'axios';\n\n// const ID_KEY = 'MPF85hV_M_MgoJFe46Ms';\n// const SECRET_KEY = 'uSvgQms2A1';\n\n// const api = axios.create({\n//   baseURL: '/api',\n//   headers: {\n//     'X-Naver-Client-Id': ID_KEY,\n//     'X-Naver-Client-Secret': SECRET_KEY,\n//   }\n// });\n\nexport const naverMoviesApi = {\n  search: (like,limit) => axios.get('https://yts.mx/api/v2/list_movies.json', {\n    params: {\n      sort_by: like + \"_count\",\n      limit: limit\n    }\n  })\n};","import React from 'react';\nimport \"./Search.css\";\nimport Movie from './Movie';\nimport {naverMoviesApi} from '../api';\n\nclass Search extends React.Component {\n  state = {\n    isLoading: false,\n    isSearched: false,\n    movies: [],\n    idx: null\n  };\n\n  getSearchMovie = async () => {\n    console.log('search Movie');\n    const search = this.state.value;\n\n    try {\n      if (search === \"\") {\n        this.setState({movies: [], isLoading: false, isSearched: false})\n      } else {\n        this.setState({movies: [], isLoading: true})\n        const searchData = String(search);\n        const searchArr =  searchData.split(\" \");\n        const {data: {\n            data : { movies }\n          }} = await naverMoviesApi.search(searchArr[0], searchArr[1]);\n        //alert(\"(Loading 메시지 확인중...)\");\n        this.setState({movies: movies, isLoading: false});\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  getMovieDetail = (id) => {\n    fetch(`https://movie-app-2021.herokuapp.com/yts/api/v2/movie_details.json?movie_id=${id}&with_images=true&with_cast=true`, {\n        method: \"GET\",\n        headers: {\n          'Content-type' : 'application/json'\n        },\n      })\n      .then(response => response.json())\n      .then(response => {\n        console.log('res', response);\n        this.setState({like_cnt : response.data.movie.like_count});\n      })\n  };\n\n  componentDidMount() {\n    this.getSearchMovie();\n    console.log(this.state.movies)\n  };\n\n  handleChange = (e) => {\n    this.setState({value: e.target.value});\n  };\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    this.getSearchMovie();\n    this.setState({isSearched: true});\n  };\n\n  buttonClicked = (e, id) => {\n    this.setState({idx: e});\n    console.log(this.state.movies)\n    this.getMovieDetail(id);\n  };\n\n  render() {\n    const { movies, isLoading, isSearched, idx } = this.state;\n    const buttons = movies.map((movie, index) => <img key={movie.id} id={movie.id} src={movie.medium_cover_image} onClick={() => this.buttonClicked(index, movie.id)}/>);\n    const movie_result = movies.map((movie, index) => {\n      return (\n          <Movie key={movie.id} id={movie.id} year={movie.year} title={movie.title} genres={movie.genres} runtime={movie.runtime} rating={movie.rating} summary={movie.summary} background={movie.large_cover_image} index={index} like_cnt={this.state.like_cnt}/>\n      )\n    });\n  \n    return (<section className=\"container\">\n      {\n        isLoading\n          ? (<div className=\"loader\">\n            <span className=\"loader__text\">({this.state.name}) Loading… {this.state.value}</span>\n          </div>)\n          : (<form onSubmit={this.handleSubmit}>\n              <div className=\"input_div\">\n                <h1 className=\"title\">yts.mx 영화 정보</h1>\n                <div className=\"search_div\">\n                  <input className=\"input_search\" type=\"text\" value={this.state.value} onChange={this.handleChange} placeholder=\"입력포맷:<정렬기준><검색개수> 예:like 5\"/><button className=\"addButton\">+</button>\n                </div>\n              </div>\n              <div className=\"movies_div\" style={isSearched ? {display:'flex'} : {display:'none'}}>\n                {buttons}\n              </div>\n              <div className=\"movie_div\">\n                {movie_result[idx]}\n              </div>\n          </form>)\n      }\n    </section>);\n  }\n}\n\nexport default Search;","import React from 'react';\nimport Search from \"./components/Search\" \n\nfunction App(){\n  return (\n  <Search> </Search>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}